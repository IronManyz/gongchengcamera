# 工程相机 - 原型设计文档

> **版本**: v1.0.0  
> **设计日期**: 2025-10-22  
> **设计目的**: 为开发团队提供清晰的UI/UX设计指导

---

## 目录

1. [设计原则](#设计原则)
2. [信息架构](#信息架构)
3. [页面原型](#页面原型)
4. [交互流程](#交互流程)
5. [组件库](#组件库)
6. [主题设计](#主题设计)

---

## 设计原则

### 核心设计理念
- **专业化**: 针对工程场景优化，信息密度适中
- **效率优先**: 核心操作（拍照、查看、导出）快速直达
- **离线友好**: 明确区分在线/离线功能状态
- **数据安全**: 隐私保护和数据本地化视觉提示

### 交互原则
- **少于3步操作**: 核心功能操作步骤不超过3步
- **视觉反馈**: 所有操作提供明确的视觉反馈
- **容错设计**: 防止误删，提供撤销机制
- **渐进式披露**: 高级功能按需展示

---

## 信息架构

```
┌─────────────────────────────────────────┐
│         工程相机 App 架构                 │
└─────────────────────────────────────────┘
              │
    ┌─────────┴─────────┐
    ▼                   ▼
┌─────────┐        ┌──────────┐
│ 主导航   │        │  快捷入口 │
└─────────┘        └──────────┘
    │                   │
    ├───────────────────┴──────────────────┐
    │         │         │         │         │
    ▼         ▼         ▼         ▼         ▼
┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐
│ 工程   │ │ 拍照   │ │ 相册   │ │ 设置   │ │ 我的   │
└────────┘ └────────┘ └────────┘ └────────┘ └────────┘
    │         │         │         │         │
    │         │         │         │         │
    ├─工程列表 ├─相机界面 ├─照片列表 ├─通用设置 ├─个人中心
    ├─工点管理 ├─水印配置 ├─分组查看 ├─水印模板 ├─团队管理
    ├─团队协作 ├─拍照结果 ├─照片编辑 ├─主题切换 ├─备份管理
    └─项目详情 └─历史记录 ├─导出分享 ├─数据库   └─关于
                        └─批量操作 └─权限管理
```

---

## 页面原型

### 1. 启动欢迎页 (Splash & Onboarding)

```
┌──────────────────────────────────────────┐
│                                          │
│           [App Logo/Icon]                │
│                                          │
│           📸 工程相机                     │
│         Engineering Camera               │
│                                          │
│        专业 · 安全 · 高效                 │
│                                          │
│                                          │
│         [Loading Progress Bar]           │
│                                          │
│                                          │
│      正在初始化数据库...                   │
│                                          │
└──────────────────────────────────────────┘

┌──────────────────────────────────────────┐
│  首次使用引导 (Onboarding - 3页滑动)        │
├──────────────────────────────────────────┤
│                                          │
│         [Illustration: 工程管理]          │
│                                          │
│        按工程和工点管理照片                 │
│    支持多项目、多工点的层级化管理            │
│                                          │
│                                          │
│           ○ ● ○  (分页指示器)             │
│                                          │
│      [跳过]              [下一步 →]        │
└──────────────────────────────────────────┘
```

**关键元素**:
- App Logo: 简洁的相机+工程元素图标
- 加载动画: 显示数据库初始化进度
- 引导页: 3页滑动介绍（工程管理、专业水印、数据安全）
- CTA按钮: "开始使用"进入主界面

---

### 2. 主界面 - 工程列表 (Home - Projects)

```
┌──────────────────────────────────────────┐
│  ☰  工程相机          🔍  ⊕              │ ← 顶部导航栏
├──────────────────────────────────────────┤
│                                          │
│  📊 统计概览                              │
│  ┌─────────┬─────────┬─────────┐         │
│  │ 3个工程  │ 12个工点 │ 156张照片│         │
│  └─────────┴─────────┴─────────┘         │
│                                          │
│  🏗️ 我的工程                              │
│                                          │
│  ┌──────────────────────────────────┐    │
│  │ 📁 市政道路改造工程 #P2025-001      │    │
│  │    负责人: 张三  |  进行中           │    │
│  │    4个工点  |  52张照片             │    │
│  │    最后更新: 2小时前                 │    │
│  │                            [⋮]      │    │
│  └──────────────────────────────────┘    │
│                                          │
│  ┌──────────────────────────────────┐    │
│  │ 📁 电力线路巡检工程 #P2025-002      │    │
│  │    负责人: 李四  |  已完成           │    │
│  │    6个工点  |  89张照片             │    │
│  │    最后更新: 3天前                  │    │
│  │                            [⋮]      │    │
│  └──────────────────────────────────┘    │
│                                          │
│  ┌──────────────────────────────────┐    │
│  │ 📁 园林绿化项目 #P2025-003          │    │
│  │    负责人: 王五  |  准备中           │    │
│  │    2个工点  |  15张照片             │    │
│  │    最后更新: 1周前                  │    │
│  │                            [⋮]      │    │
│  └──────────────────────────────────┘    │
│                                          │
├──────────────────────────────────────────┤
│   [🏗️ 工程] [📸 拍照] [📱 相册] [⚙️ 设置]  │ ← 底部Tab导航
└──────────────────────────────────────────┘
```

**核心交互**:
- **顶部栏**: 侧边菜单 / 搜索 / 新建工程
- **统计卡片**: 一目了然的数据概览
- **工程卡片**: 点击进入工程详情，长按显示更多操作（编辑/删除/归档）
- **底部导航**: 4个主要功能入口（突出拍照按钮）

**状态指示**:
- 🟢 进行中 / 🔵 准备中 / ⚪ 已完成 / 🟡 暂停

---

### 3. 工程详情 - 工点管理 (Project Detail - Sites)

```
┌──────────────────────────────────────────┐
│  ←  市政道路改造工程        📤 ⋮          │
├──────────────────────────────────────────┤
│                                          │
│  [概况] [工点] [相册] [团队] [设置]        │ ← Tab切换
│  ════════════════════════════════════     │
│                                          │
│  🎯 快速操作                              │
│  ┌────────┬────────┬────────┐            │
│  │ 📸 拍照 │ 📊 报告 │ 📤 导出 │            │
│  └────────┴────────┴────────┘            │
│                                          │
│  📍 工点列表 (4)                  [+新建]  │
│                                          │
│  ┌──────────────────────────────────┐    │
│  │ 📍 北环路段 K3+200              │    │
│  │    📷 24张照片  |  最新: 2小时前    │    │
│  │    📌 经度: 116.404  纬度: 39.915  │    │
│  │    ┌─┬─┬─┬─┐                      │    │
│  │    │🖼│🖼│🖼│⋯│ (缩略图快览)        │    │
│  │    └─┴─┴─┴─┘                      │    │
│  │              [📸 拍照] [👁️ 查看]     │    │
│  └──────────────────────────────────┘    │
│                                          │
│  ┌──────────────────────────────────┐    │
│  │ 📍 南环路段 K5+800              │    │
│  │    📷 15张照片  |  最新: 1天前      │    │
│  │    📌 经度: 116.408  纬度: 39.910  │    │
│  │    ┌─┬─┬─┬─┐                      │    │
│  │    │🖼│🖼│🖼│⋯│                    │    │
│  │    └─┴─┴─┴─┘                      │    │
│  │              [📸 拍照] [👁️ 查看]     │    │
│  └──────────────────────────────────┘    │
│                                          │
│  ┌──────────────────────────────────┐    │
│  │ 📍 东环立交桥                     │    │
│  │    📷 8张照片  |  最新: 3天前       │    │
│  │    📌 经度: 116.420  纬度: 39.920  │    │
│  │    ...                             │    │
│  └──────────────────────────────────┘    │
│                                          │
└──────────────────────────────────────────┘
```

**关键功能**:
- **Tab导航**: 工程信息分类展示
- **快速操作**: 常用功能一键直达
- **工点卡片**: 显示关键信息+照片预览+快捷操作
- **新建工点**: 支持手动输入或地图选点

---

### 4. 拍照界面 (Camera)

```
┌──────────────────────────────────────────┐
│  ×  [工程名] / [工点名]         ⚙️        │ ← 半透明顶栏
│                                          │
│                                          │
│                                          │
│          [相机取景区域]                    │
│                                          │
│         实时预览水印叠加层                  │
│  ┌────────────────────────────────┐      │
│  │ 市政道路改造工程                 │      │
│  │ 北环路段 K3+200                 │      │
│  │ 📍 116.404, 39.915  ⛰️ 58m     │      │
│  │ 🧭 东北方向 45°  🌤️ 晴 23°C     │      │
│  │ 拍摄: 张三  时间: 2025-10-22    │      │
│  └────────────────────────────────┘      │
│                                          │
│                                          │
├──────────────────────────────────────────┤
│  [🖼️]  [◉]  [🔄]              │ ← 底部操作栏
│  相册  快门  切换              │
│                                          │
│  [水印]  [网格]  [⚡]  [⏱️]              │
│  模板   辅助线   闪光灯  定时             │
└──────────────────────────────────────────┘
```

**拍照流程**:
1. **进入相机**: 选择工程和工点（或新建）
2. **自动定位**: 实时获取GPS、海拔、方位角、天气
3. **水印预览**: 实时显示水印效果（可调整模板）
4. **拍摄**: 按快门拍照
5. **预览确认**: 显示拍摄结果，可重拍或保存

**水印模板选择器** (点击"水印"按钮):
```
┌──────────────────────────────────────────┐
│  水印模板                      [×]         │
├──────────────────────────────────────────┤
│  ☑️ 标准工程模板                           │
│  □  市政工程模板                           │
│  □  电力巡检模板                           │
│  □  园林绿化模板                           │
│  □  自定义模板 1                           │
│  ─────────────────────────                │
│  ✏️ 编辑当前模板                           │
│  ⊕ 新建模板                               │
│                                          │
│  显示信息:                                │
│  ☑️ 工程名称  ☑️ 工点名称                   │
│  ☑️ 经纬度    ☑️ 海拔高度                   │
│  ☑️ 方位角    ☑️ 地理位置                   │
│  ☑️ 天气      ☑️ 拍摄时间                   │
│  ☑️ 拍摄人    □  自定义备注                 │
│                                          │
│           [取消]    [保存]                │
└──────────────────────────────────────────┘
```

---

### 5. 照片预览与编辑 (Photo Preview & Edit)

**拍照后预览**:
```
┌──────────────────────────────────────────┐
│  ×                              ✓ 保存    │
├──────────────────────────────────────────┤
│                                          │
│                                          │
│                                          │
│         [刚拍摄的照片预览]                  │
│       (包含水印叠加效果)                    │
│                                          │
│                                          │
│                                          │
│                                          │
├──────────────────────────────────────────┤
│  [🔄 重拍]  [✏️ 编辑]  [💬 备注]           │
└──────────────────────────────────────────┘
```

**照片编辑器**:
```
┌──────────────────────────────────────────┐
│  ←  编辑照片                  ✓ 完成      │
├──────────────────────────────────────────┤
│                                          │
│                                          │
│         [照片编辑画布]                     │
│        (支持缩放、拖动)                    │
│                                          │
│                                          │
│                                          │
├──────────────────────────────────────────┤
│  [🖊️] [📝] [🔲] [🔘] [💧] [✂️] [↻] [⚙️]   │
│  涂鸦  文字  矩形  圆形  模糊  裁剪  旋转  设置│
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ 画笔设置 (当选择涂鸦时展开)            │  │
│  │ 颜色: [🔴][🟢][🔵][🟡]... 粗细: ━━  │  │
│  └────────────────────────────────────┘  │
└──────────────────────────────────────────┘
```

**编辑功能**:
- ✏️ **涂鸦**: 自由绘制线条（多色画笔、粗细调节、橡皮擦）
- 📝 **文字**: 添加文本标注（字体、大小、颜色）
- 🔲 **图形**: 矩形、圆形、箭头等标注
- 💧 **模糊**: 马赛克/模糊敏感信息
- ✂️ **裁剪**: 自由裁剪或固定比例
- ↻ **旋转**: 旋转/翻转照片
- ⚙️ **滤镜**: 亮度、对比度、饱和度调整

---

### 6. 相册与照片管理 (Gallery)

```
┌──────────────────────────────────────────┐
│  ←  照片相册           🔍  选择  ⋮        │
├──────────────────────────────────────────┤
│  [全部] [按工程] [按工点] [按日期] [标签]  │ ← 筛选Tab
│  ════════════════════════════════════     │
│                                          │
│  📅 今天 (8)                              │
│  ┌───┬───┬───┬───┐                       │
│  │ 🖼 │ 🖼 │ 🖼 │ 🖼 │                       │
│  │   │   │   │   │                       │
│  ├───┼───┼───┼───┤                       │
│  │ 🖼 │ 🖼 │ 🖼 │ 🖼 │                       │
│  │   │   │   │   │                       │
│  └───┴───┴───┴───┘                       │
│                                          │
│  📅 昨天 (12)                             │
│  ┌───┬───┬───┬───┐                       │
│  │ 🖼 │ 🖼 │ 🖼 │ 🖼 │                       │
│  │   │   │   │   │                       │
│  ├───┼───┼───┼───┤                       │
│  │ 🖼 │ 🖼 │ 🖼 │ 🖼 │                       │
│  │   │   │   │   │                       │
│  ├───┼───┼───┼───┤                       │
│  │ 🖼 │ 🖼 │ 🖼 │ 🖼 │                       │
│  │   │   │   │   │                       │
│  └───┴───┴───┴───┘                       │
│                                          │
│  📅 2025-10-20 (15)                      │
│  ...                                     │
│                                          │
└──────────────────────────────────────────┘
```

**照片详情** (点击缩略图):
```
┌──────────────────────────────────────────┐
│  ←               1/24              ⋮     │
├──────────────────────────────────────────┤
│                                          │
│                                          │
│         [全屏照片显示]                     │
│      (支持双指缩放、左右滑动切换)            │
│                                          │
│                                          │
│                                          │
├──────────────────────────────────────────┤
│  ▼ 照片信息                               │
│  ┌────────────────────────────────────┐  │
│  │ 📁 市政道路改造工程 / 北环路段       │  │
│  │ 📍 经度:116.404 纬度:39.915 ⛰️58m  │  │
│  │ 🧭 东北方向 45°  🌤️ 晴 23°C         │  │
│  │ 📷 张三  📅 2025-10-22 14:30       │  │
│  │ 💬 "桥梁支撑结构检查完成"            │  │
│  └────────────────────────────────────┘  │
│                                          │
│  [✏️ 编辑] [📤 分享] [🗺️ 导航] [🗑️ 删除]   │
└──────────────────────────────────────────┘
```

**批量操作模式** (点击"选择"):
```
┌──────────────────────────────────────────┐
│  ×  已选择 5 张                  全选      │
├──────────────────────────────────────────┤
│  ┌───┬───┬───┬───┐                       │
│  │ ✓ │   │ ✓ │   │                       │
│  │🖼 │🖼 │🖼 │🖼 │                       │
│  ├───┼───┼───┼───┤                       │
│  │ ✓ │ ✓ │   │ ✓ │                       │
│  │🖼 │🖼 │🖼 │🖼 │                       │
│  └───┴───┴───┴───┘                       │
│  ...                                     │
│                                          │
├──────────────────────────────────────────┤
│  [📤 导出] [📊 报告] [🗑️ 删除]             │
└──────────────────────────────────────────┘
```

---

### 7. 导出与分享 (Export & Share)

**导出选项面板**:
```
┌──────────────────────────────────────────┐
│  导出照片                        [×]       │
├──────────────────────────────────────────┤
│                                          │
│  📤 导出方式                              │
│  ○ 单张图片                               │
│  ● 多张打包 (5张)                         │
│  ○ 拼图报告                               │
│  ○ PDF文档                                │
│                                          │
│  ─────────────────────────                │
│                                          │
│  📝 报告设置 (拼图/PDF)                    │
│  ☑️ 包含工程信息                           │
│  ☑️ 显示拍摄位置                           │
│  ☑️ 显示拍摄时间                           │
│  □  显示水印信息                           │
│  ☑️ 添加备注说明                           │
│                                          │
│  布局: [2列] ▼                            │
│  排序: [按时间] ▼                          │
│                                          │
│  ─────────────────────────                │
│                                          │
│  💾 保存位置                              │
│  ● 本地相册                               │
│  ○ 应用文档目录                           │
│  ○ 选择其他位置...                        │
│                                          │
│          [取消]      [开始导出]            │
└──────────────────────────────────────────┘
```

**拼图报告预览**:
```
┌──────────────────────────────────────────┐
│  拼图报告预览                    ✓ 保存    │
├──────────────────────────────────────────┤
│  ┌────────────────────────────────────┐  │
│  │ 市政道路改造工程 - 施工记录报告      │  │
│  │ 北环路段 K3+200                     │  │
│  │ 日期: 2025-10-22  拍摄人: 张三      │  │
│  ├────────────────────────────────────┤  │
│  │ ┌──────┐  ┌──────┐                │  │
│  │ │ 照片1 │  │ 照片2 │  [2列布局]    │  │
│  │ │      │  │      │                │  │
│  │ └──────┘  └──────┘                │  │
│  │ 14:30 桥梁支撑   14:45 结构检查    │  │
│  │                                    │  │
│  │ ┌──────┐  ┌──────┐                │  │
│  │ │ 照片3 │  │ 照片4 │                │  │
│  │ │      │  │      │                │  │
│  │ └──────┘  └──────┘                │  │
│  │ 15:00 混凝土浇筑 15:30 质量检测    │  │
│  │                                    │  │
│  │ ... (滚动查看)                      │  │
│  └────────────────────────────────────┘  │
│                                          │
│  [📤 分享] [💾 保存] [🖨️ 打印]             │
└──────────────────────────────────────────┘
```

---

### 8. 设置页面 (Settings)

```
┌──────────────────────────────────────────┐
│  ←  设置                                  │
├──────────────────────────────────────────┤
│                                          │
│  🎨 外观设置                              │
│  ┌────────────────────────────────────┐  │
│  │ 主题模式                   [系统] ▶  │  │
│  │ 字体大小                   [标准] ▶  │  │
│  └────────────────────────────────────┘  │
│                                          │
│  📸 相机设置                              │
│  ┌────────────────────────────────────┐  │
│  │ 照片分辨率              [4K(3840)] ▶ │  │
│  │ 照片质量                   [高] ▶    │  │
│  │ 默认水印模板          [标准工程] ▶    │  │
│  │ 自动定位                   [开] ▶    │  │
│  │ 自动获取天气               [开] ▶    │  │
│  └────────────────────────────────────┘  │
│                                          │
│  🗄️ 数据管理                              │
│  ┌────────────────────────────────────┐  │
│  │ 数据库管理                        ▶  │  │
│  │ 本地备份                          ▶  │  │
│  │ 云端同步                    [关] ▶  │  │
│  │ 清理缓存                 12.5 MB ▶  │  │
│  └────────────────────────────────────┘  │
│                                          │
│  👥 团队协作                              │
│  ┌────────────────────────────────────┐  │
│  │ 团队成员管理                      ▶  │  │
│  │ 权限设置                          ▶  │  │
│  └────────────────────────────────────┘  │
│                                          │
│  🔐 隐私与安全                            │
│  ┌────────────────────────────────────┐  │
│  │ 应用锁                     [关] ▶  │  │
│  │ 照片加密                   [关] ▶  │  │
│  │ 权限管理                          ▶  │  │
│  └────────────────────────────────────┘  │
│                                          │
│  ℹ️ 关于                                  │
│  ┌────────────────────────────────────┐  │
│  │ 版本信息               v1.0.0      ▶ │  │
│  │ 使用帮助                          ▶  │  │
│  │ 隐私政策                          ▶  │  │
│  └────────────────────────────────────┘  │
│                                          │
└──────────────────────────────────────────┘
```

**数据库管理页面**:
```
┌──────────────────────────────────────────┐
│  ←  数据库管理                            │
├──────────────────────────────────────────┤
│                                          │
│  📊 数据概览                              │
│  ┌────────────────────────────────────┐  │
│  │ 数据库版本: 1.0                      │  │
│  │ 总大小: 156.8 MB                    │  │
│  │ 照片数: 156 张                       │  │
│  │ 最后备份: 2天前                      │  │
│  └────────────────────────────────────┘  │
│                                          │
│  🗂️ 数据表                                │
│  ┌────────────────────────────────────┐  │
│  │ projects           3条记录        ▶ │  │
│  │ sites             12条记录        ▶ │  │
│  │ photos           156条记录        ▶ │  │
│  │ watermark_templates 5条记录       ▶ │  │
│  │ users              1条记录        ▶ │  │
│  └────────────────────────────────────┘  │
│                                          │
│  🔧 数据库操作                            │
│  ┌────────────────────────────────────┐  │
│  │ [💾 备份数据库]                      │  │
│  │ [📥 导入数据库]                      │  │
│  │ [📤 导出为JSON]                      │  │
│  │ [🔄 检查完整性]                      │  │
│  │ [⚠️ 清空数据库] (危险操作)           │  │
│  └────────────────────────────────────┘  │
│                                          │
│  📝 操作日志                              │
│  ┌────────────────────────────────────┐  │
│  │ 2025-10-22 14:30 - 备份数据库       │  │
│  │ 2025-10-20 10:15 - 导入照片 15张   │  │
│  │ 2025-10-19 09:00 - 清理缓存        │  │
│  └────────────────────────────────────┘  │
│                                          │
└──────────────────────────────────────────┘
```

---

### 9. 团队协作 (Team Collaboration)

**团队成员管理**:
```
┌──────────────────────────────────────────┐
│  ←  团队管理                    ⊕ 邀请    │
├──────────────────────────────────────────┤
│                                          │
│  工程: 市政道路改造工程                    │
│                                          │
│  👥 成员列表 (4)                          │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ 👤 张三                    [管理员]  │  │
│  │    zhang@example.com                │  │
│  │    权限: 📸拍照 ✏️编辑 🗑️删除        │  │
│  │    最后活动: 2小时前                │  │
│  │                           [⋮]       │  │
│  └────────────────────────────────────┘  │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ 👤 李四                    [编辑者]  │  │
│  │    li@example.com                   │  │
│  │    权限: 📸拍照 ✏️编辑              │  │
│  │    最后活动: 1天前                  │  │
│  │                           [⋮]       │  │
│  └────────────────────────────────────┘  │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ 👤 王五                    [查看者]  │  │
│  │    wang@example.com                 │  │
│  │    权限: 👁️查看                      │  │
│  │    最后活动: 3天前                  │  │
│  │                           [⋮]       │  │
│  └────────────────────────────────────┘  │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ 👤 赵六                [待接受邀请]  │  │
│  │    zhao@example.com                 │  │
│  │    邀请时间: 1天前                  │  │
│  │              [取消邀请]              │  │
│  └────────────────────────────────────┘  │
│                                          │
└──────────────────────────────────────────┘
```

**邀请成员弹窗**:
```
┌──────────────────────────────────────────┐
│  邀请团队成员                    [×]       │
├──────────────────────────────────────────┤
│                                          │
│  邮箱地址:                                │
│  ┌────────────────────────────────────┐  │
│  │ example@email.com                  │  │
│  └────────────────────────────────────┘  │
│                                          │
│  角色权限:                                │
│  ○ 管理员 (拍照/编辑/删除/管理团队)        │
│  ● 编辑者 (拍照/编辑/查看)                │
│  ○ 查看者 (仅查看)                        │
│                                          │
│  ─────────────────────────                │
│                                          │
│  权限说明:                                │
│  ✓ 查看工程和照片                         │
│  ✓ 拍摄新照片                             │
│  ✓ 编辑和标注照片                         │
│  ✗ 删除照片和工程                         │
│  ✗ 管理团队成员                           │
│                                          │
│          [取消]      [发送邀请]            │
└──────────────────────────────────────────┘
```

---

### 10. 云端备份与同步 (Cloud Backup)

```
┌──────────────────────────────────────────┐
│  ←  云端备份                              │
├──────────────────────────────────────────┤
│                                          │
│  ☁️ 同步状态                              │
│  ┌────────────────────────────────────┐  │
│  │ 🟢 已连接                            │  │
│  │ 上次同步: 2小时前                    │  │
│  │ 云端存储: 156.8 MB / 5 GB (3%)      │  │
│  └────────────────────────────────────┘  │
│                                          │
│  ⚙️ 同步设置                              │
│  ┌────────────────────────────────────┐  │
│  │ 自动备份                   [开] ▶  │  │
│  │ 仅WiFi同步                 [开] ▶  │  │
│  │ 备份频率              [每天一次] ▶  │  │
│  │ 照片压缩质量             [高] ▶    │  │
│  └────────────────────────────────────┘  │
│                                          │
│  📦 备份记录                              │
│  ┌────────────────────────────────────┐  │
│  │ 2025-10-22 14:00                   │  │
│  │ ✓ 完整备份  156张照片  156.8 MB    │  │
│  │                    [恢复] [详情]    │  │
│  ├────────────────────────────────────┤  │
│  │ 2025-10-21 14:00                   │  │
│  │ ✓ 增量备份  12张照片  15.2 MB      │  │
│  │                    [恢复] [详情]    │  │
│  ├────────────────────────────────────┤  │
│  │ 2025-10-20 14:00                   │  │
│  │ ✓ 完整备份  144张照片  141.6 MB    │  │
│  │                    [恢复] [详情]    │  │
│  └────────────────────────────────────┘  │
│                                          │
│  🔧 操作                                  │
│  ┌────────────────────────────────────┐  │
│  │ [☁️ 立即备份]                        │  │
│  │ [📥 恢复数据]                        │  │
│  │ [🗑️ 清理云端数据]                    │  │
│  └────────────────────────────────────┘  │
│                                          │
└──────────────────────────────────────────┘
```

**数据恢复确认**:
```
┌──────────────────────────────────────────┐
│  恢复数据                        [×]       │
├──────────────────────────────────────────┤
│                                          │
│  ⚠️ 重要提示                              │
│                                          │
│  即将从云端恢复以下数据:                   │
│                                          │
│  备份时间: 2025-10-21 14:00              │
│  数据内容:                                │
│  • 3个工程                                │
│  • 12个工点                               │
│  • 144张照片                              │
│  • 5个水印模板                            │
│                                          │
│  ─────────────────────────                │
│                                          │
│  恢复策略:                                │
│  ● 合并数据 (保留本地新增数据)            │
│  ○ 覆盖本地数据 (本地数据将丢失)          │
│                                          │
│  冲突处理:                                │
│  ○ 保留云端版本                           │
│  ● 保留最新版本                           │
│  ○ 手动选择                               │
│                                          │
│  ☑️ 恢复前先备份当前数据                   │
│                                          │
│          [取消]      [开始恢复]            │
└──────────────────────────────────────────┘
```

---

## 交互流程

### 核心用户流程 1: 拍照流程

```
1. 首页/工程详情
   ↓
2. 点击"拍照"按钮
   ↓
3. [首次使用] 请求权限 → 相机/定位/存储
   ↓
4. 选择工程和工点 (或新建)
   ↓
5. 进入相机界面
   • 自动定位 (经纬度、海拔、方位角)
   • 获取天气信息
   • 实时水印预览
   ↓
6. [可选] 调整水印模板/辅助设置
   ↓
7. 按快门拍摄
   ↓
8. 拍摄预览
   • [重拍] → 返回步骤7
   • [编辑] → 进入编辑器
   • [备注] → 添加文字说明
   • [保存] → 保存到数据库
   ↓
9. 保存成功提示
   • [继续拍照] → 返回步骤5
   • [查看相册] → 跳转到相册
   • [返回工程] → 返回工程详情
```

### 核心用户流程 2: 照片管理与导出

```
1. 相册页面/工程详情
   ↓
2. 浏览照片 (按日期/工程/工点分组)
   ↓
3. 点击照片缩略图 → 查看详情
   ↓
4. [操作选择]
   |
   ├─ 编辑 → 进入编辑器 → 涂鸦/标注 → 保存
   |
   ├─ 分享 → 选择分享方式 → 系统分享面板
   |
   ├─ 导航 → 调用地图应用 → 导航到拍摄点
   |
   └─ 删除 → 确认提示 → 移至回收站/永久删除
   
5. [批量操作模式]
   • 点击"选择" → 多选照片
   • 选择操作:
     - 导出 → 选择格式 → 生成文件
     - 生成报告 → 配置报告 → 预览 → 保存/分享
     - 删除 → 确认提示 → 批量删除
```

### 核心用户流程 3: 工程与工点管理

```
1. 首页工程列表
   ↓
2. [新建工程]
   • 填写基本信息 (名称/编号/负责人)
   • 设置起止时间
   • 选择行业标签
   • 保存
   ↓
3. 进入工程详情
   ↓
4. [新建工点]
   • 填写工点名称
   • 选择定位方式:
     - 当前位置
     - 地图选点
     - 手动输入坐标
   • 添加地址描述
   • 保存
   ↓
5. 工点管理
   • 查看工点列表
   • 快速拍照 (直接进入相机)
   • 查看照片 (进入照片列表)
   • 编辑工点信息
   • 删除工点 (需确认)
```

### 核心用户流程 4: 团队协作

```
1. 工程详情 → 团队Tab
   ↓
2. [邀请成员]
   • 输入邮箱
   • 选择角色 (管理员/编辑者/查看者)
   • 发送邀请
   ↓
3. [成员接受邀请] (外部流程)
   • 收到邮件/链接
   • 注册/登录
   • 确认加入
   ↓
4. 成员管理
   • 查看成员列表
   • 修改权限
   • 移除成员
   ↓
5. [协作场景]
   • 不同角色查看对应权限内容
   • 编辑者拍照 → 管理员审核
   • 云端同步 → 多设备访问
```

---

## 组件库

### 通用组件

#### 1. **ProjectCard** - 工程卡片
```
功能: 展示工程概要信息
属性:
- project: Project对象
- onTap: 点击回调
- onLongPress: 长按回调
- showStats: 是否显示统计信息

状态指示:
- 状态标签 (进行中/已完成/准备中)
- 更新时间
- 统计数据 (工点数/照片数)
```

#### 2. **SiteCard** - 工点卡片
```
功能: 展示工点信息和照片预览
属性:
- site: Site对象
- project: Project对象
- thumbnails: 照片缩略图数组
- onCamera: 拍照回调
- onView: 查看回调

特性:
- 显示经纬度
- 照片缩略图快览 (最多4张)
- 快捷操作按钮
```

#### 3. **PhotoGrid** - 照片网格
```
功能: 网格布局展示照片
属性:
- photos: Photo数组
- columns: 列数 (默认4)
- spacing: 间距
- selectable: 是否可选择
- selected: 已选择的照片ID数组
- onSelect: 选择回调
- onTap: 点击回调

特性:
- 懒加载 (LazyForEach)
- 虚拟滚动优化
- 选择模式切换
- 批量操作支持
```

#### 4. **WatermarkOverlay** - 水印叠加层
```
功能: 照片水印实时预览
属性:
- template: WatermarkTemplate对象
- data: 水印数据 (位置/天气/工程信息等)
- position: 水印位置 (top/bottom)
- opacity: 透明度

特性:
- 动态数据更新
- 多种样式模板
- 可自定义字段
```

#### 5. **EditToolbar** - 编辑工具栏
```
功能: 照片编辑工具
属性:
- activeTool: 当前激活的工具
- onToolChange: 工具切换回调
- toolOptions: 工具选项 (颜色/粗细等)

工具:
- 涂鸦 (Doodle)
- 文字 (Text)
- 图形 (Shape)
- 模糊 (Blur)
- 裁剪 (Crop)
- 旋转 (Rotate)
```

#### 6. **StatCard** - 统计卡片
```
功能: 数据统计展示
属性:
- title: 标题
- value: 数值
- icon: 图标
- trend: 趋势 (上升/下降)
- color: 主题色

样式:
- 卡片式布局
- 图标+数字+标签
- 可选趋势指示器
```

#### 7. **EmptyState** - 空状态占位
```
功能: 无数据时的占位提示
属性:
- icon: 图标
- title: 主标题
- description: 描述文字
- actionText: 操作按钮文字
- onAction: 操作回调

场景:
- 无工程
- 无照片
- 无网络
- 搜索无结果
```

#### 8. **ConfirmDialog** - 确认对话框
```
功能: 危险操作确认
属性:
- title: 标题
- message: 提示信息
- confirmText: 确认按钮文字
- cancelText: 取消按钮文字
- dangerous: 是否为危险操作 (红色按钮)
- onConfirm: 确认回调
- onCancel: 取消回调

场景:
- 删除确认
- 清空数据
- 覆盖文件
```

---

## 主题设计

### 颜色系统

#### 浅色主题 (Light Theme)
```
主色调 (Primary):
- primary: #1890FF (蓝色 - 专业感)
- primaryLight: #40A9FF
- primaryDark: #096DD9

次要色 (Secondary):
- secondary: #52C41A (绿色 - 成功/完成)
- warning: #FAAD14 (橙色 - 警告)
- danger: #FF4D4F (红色 - 危险)

中性色 (Neutral):
- background: #F5F5F5 (浅灰背景)
- surface: #FFFFFF (卡片/容器)
- divider: #E8E8E8 (分割线)

文字色 (Text):
- textPrimary: #262626 (主要文字)
- textSecondary: #8C8C8C (次要文字)
- textDisabled: #BFBFBF (禁用文字)
```

#### 深色主题 (Dark Theme)
```
主色调:
- primary: #177DDC
- primaryLight: #1890FF
- primaryDark: #0E5199

次要色:
- secondary: #49AA19
- warning: #D89614
- danger: #D32029

中性色:
- background: #141414 (深灰背景)
- surface: #1F1F1F (卡片/容器)
- divider: #303030 (分割线)

文字色:
- textPrimary: #E8E8E8 (主要文字)
- textSecondary: #A6A6A6 (次要文字)
- textDisabled: #595959 (禁用文字)
```

### 字体系统

```
字体家族:
- 默认: HarmonyOS Sans (系统字体)
- 代码/数字: HarmonyOS Sans Mono

字体大小:
- h1: 24px (页面大标题)
- h2: 20px (区域标题)
- h3: 16px (卡片标题)
- body: 14px (正文)
- caption: 12px (辅助说明)
- small: 10px (小字提示)

字重:
- regular: 400 (常规)
- medium: 500 (中等)
- semibold: 600 (半粗)
- bold: 700 (粗体)
```

### 间距系统

```
基础单位: 4px

间距规范:
- xs: 4px (最小间距)
- sm: 8px (小间距)
- md: 12px (中间距)
- lg: 16px (大间距)
- xl: 24px (超大间距)
- xxl: 32px (区域间距)

组件内边距:
- 卡片: 12px
- 按钮: 8px 16px
- 输入框: 8px 12px
- 列表项: 12px 16px
```

### 圆角系统

```
- none: 0px (无圆角)
- sm: 4px (小圆角 - 按钮/标签)
- md: 8px (中圆角 - 卡片)
- lg: 12px (大圆角 - 对话框)
- full: 9999px (完全圆形 - 头像/标签)
```

### 阴影系统

```
- shadow-sm: 0 1px 2px rgba(0,0,0,0.05) (轻阴影)
- shadow-md: 0 2px 8px rgba(0,0,0,0.1) (卡片)
- shadow-lg: 0 4px 16px rgba(0,0,0,0.15) (悬浮)
- shadow-xl: 0 8px 24px rgba(0,0,0,0.2) (对话框)
```

### 动画系统

```
过渡时间:
- fast: 150ms (快速反馈)
- normal: 300ms (标准过渡)
- slow: 500ms (复杂动画)

缓动函数:
- easeIn: cubic-bezier(0.4, 0, 1, 1)
- easeOut: cubic-bezier(0, 0, 0.2, 1)
- easeInOut: cubic-bezier(0.4, 0, 0.2, 1)

常用动画:
- fadeIn: 淡入
- slideUp: 上滑
- scaleUp: 放大
- bounce: 弹跳
```

---

## 响应式设计

### 屏幕断点

```
- compact: < 600px (小屏手机)
- medium: 600px - 840px (大屏手机/小平板)
- expanded: > 840px (平板/折叠屏)
```

### 布局适配

#### 照片网格列数
```
- compact: 3列 (小屏手机)
- medium: 4列 (大屏手机)
- expanded: 6列 (平板)
```

#### 侧边栏布局
```
- compact: 底部导航 (Tab Bar)
- expanded: 侧边导航 (Side Navigation)
```

---

## 无障碍设计 (Accessibility)

### 基本原则
- **可感知**: 所有信息都有文字/语音描述
- **可操作**: 所有功能都可通过触摸/键盘操作
- **可理解**: 清晰的标签和错误提示
- **健壮性**: 兼容辅助技术

### 设计要点
1. **对比度**: 文字与背景对比度 ≥ 4.5:1
2. **触摸目标**: 最小尺寸 44x44px
3. **语义标签**: 所有交互元素有明确的 contentDescription
4. **焦点指示**: 键盘导航时有清晰的焦点高亮
5. **动画控制**: 提供"减少动画"选项

---

## 性能优化

### 图片加载策略
1. **缩略图**: 网格展示使用小尺寸缩略图 (200x200px)
2. **渐进加载**: 先显示模糊图，再加载高清图
3. **懒加载**: 只加载可视区域的图片
4. **缓存策略**: LRU缓存，最多缓存100张缩略图

### 列表渲染优化
1. **LazyForEach**: 大列表使用懒加载
2. **虚拟滚动**: 只渲染可视区域+缓冲区
3. **组件复用**: 使用 @Reusable 装饰器
4. **分页加载**: 每页加载20条数据

---

## 设计交付物

### 开发阶段需交付
1. ✅ **本原型设计文档** (已完成)
2. ⏳ **高保真UI设计稿** (推荐工具: Figma/Sketch)
3. ⏳ **图标素材库** (SVG格式)
4. ⏳ **动效演示视频** (关键交互)
5. ⏳ **设计规范文档** (组件库详细说明)

### 设计资产清单
```
/design-assets/
├── icons/              # 图标素材
│   ├── tab-bar/       # 底部导航图标
│   ├── tools/         # 编辑工具图标
│   ├── actions/       # 操作图标
│   └── status/        # 状态图标
├── illustrations/      # 插画素材
│   ├── onboarding/    # 引导页插画
│   ├── empty-state/   # 空状态插画
│   └── error/         # 错误提示插画
├── mockups/           # 高保真设计稿
│   ├── light-theme/   # 浅色主题
│   └── dark-theme/    # 深色主题
└── prototype.fig      # Figma交互原型
```

---

## 下一步行动

### 设计阶段
1. ✅ 完成原型设计文档
2. ⏳ 绘制高保真UI设计稿
3. ⏳ 制作交互原型 (Figma/Sketch)
4. ⏳ 进行可用性测试
5. ⏳ 优化设计方案

### 开发阶段
1. ⏳ 搭建UI组件库
2. ⏳ 实现主题系统
3. ⏳ 实现页面布局
4. ⏳ 集成业务逻辑
5. ⏳ 进行UI测试

---

**文档维护**: steering-architect / strategic-planner  
**创建日期**: 2025-10-22  
**最后更新**: 2025-10-22  
**设计状态**: ✅ 原型完成，待高保真设计

---

## 附录: 设计参考

### 参考应用
- 微信 (简洁的交互设计)
- 飞书 (高效的协作体验)
- 小红书 (优秀的图片展示)
- 钉钉 (专业的企业应用)

### 设计系统参考
- Material Design 3 (Google)
- HarmonyOS 设计规范
- iOS Human Interface Guidelines
- Ant Design Mobile (图标和组件)

### 色彩参考
- Ant Design 色板
- Material Design Color Tool
- Coolors.co (配色生成)

---

**本原型设计为工程相机应用提供完整的UI/UX指导，所有页面和交互流程均基于README中的功能需求设计。开发团队可基于此文档进行高保真设计和代码实现。**

