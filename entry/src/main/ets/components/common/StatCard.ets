/**
 * ç»Ÿè®¡å¡ç‰‡ç»„ä»¶
 * ç”¨äºå±•ç¤ºæ•°æ®ç»Ÿè®¡ä¿¡æ¯
 */

@ComponentV2
export struct StatCard {
  @Param title: string = ''
  @Param value: string | number = ''
  @Param icon: string = 'ğŸ“'
  @Param color: string = '#1890FF'
  @Param trend?: 'up' | 'down' | 'stable' = 'stable'
  @Param subtitle?: string = ''

  build() {
    Column() {
      // å›¾æ ‡å’Œæ•°å€¼
      Row() {
        // å›¾æ ‡
        Text(this.icon)
          .fontSize(20)
          .fontColor(this.color)
          .margin({ right: 12 })

        Column() {
          // æ•°å€¼
          Text(typeof this.value === 'number' ? this.value.toString() : this.value)
            .fontSize(24)
            .fontWeight(FontWeight.Bold)
            .fontColor('#262626')

          // æ ‡é¢˜
          Text(this.title)
            .fontSize(14)
            .fontColor('#8C8C8C')
            .margin({ top: 4 })
        }
        .alignItems(HorizontalAlign.Start)
        .layoutWeight(1)

        // è¶‹åŠ¿æŒ‡ç¤ºå™¨
        if (this.trend) {
          this.buildTrendIndicator()
        }
      }
      .width('100%')
      .alignItems(VerticalAlign.Center)

      // å‰¯æ ‡é¢˜
      if (this.subtitle) {
        Text(this.subtitle)
          .fontSize(12)
          .fontColor('#A6A6A6')
          .margin({ top: 8 })
          .textAlign(TextAlign.Start)
          .width('100%')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#FFFFFF')
    .borderRadius(8)
    .shadow({
      radius: 4,
      color: '#00000010',
      offsetX: 0,
      offsetY: 2
    })
  }

  @Builder
  private buildTrendIndicator(): void {
    Row() {
      if (this.trend === 'up') {
        Text('â†‘')
          .fontSize(16)
          .fontColor('#52C41A')
      } else if (this.trend === 'down') {
        Text('â†“')
          .fontSize(16)
          .fontColor('#FF4D4F')
      }

      if (this.trend !== 'stable') {
        Text(this.trend === 'up' ? 'ä¸Šå‡' : 'ä¸‹é™')
          .fontSize(12)
          .fontColor(this.trend === 'up' ? '#52C41A' : '#FF4D4F')
          .margin({ left: 4 })
      }
    }
  }
}