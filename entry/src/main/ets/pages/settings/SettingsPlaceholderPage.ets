/**
 * è®¾ç½®é¡µé¢
 * æä¾›åº”ç”¨çš„å„ç§è®¾ç½®é€‰é¡¹ï¼ŒåŒ…æ‹¬ä¸»é¢˜ã€å­˜å‚¨ã€å…³äºç­‰åŠŸèƒ½
 */

import router from '@ohos.router'
import { BottomNavigation } from '../../components/common/BottomNavigation'

interface SettingItem {
  title: string
  subtitle?: string
  icon: string
  onPress: () => void
}

@Entry
@Component
struct SettingsPage {
  @State private isDarkMode: boolean = false
  @State private storageUsed: string = '125.6 MB'
  @State private photoCount: number = 156
  @State private version: string = '1.0.0'

  private settingsList: SettingItem[] = [
    {
      title: 'ä¸»é¢˜è®¾ç½®',
      subtitle: 'åˆ‡æ¢æµ…è‰²/æ·±è‰²ä¸»é¢˜',
      icon: 'ğŸ¨',
      onPress: () => {
        console.log('Theme settings clicked')
      }
    },
    {
      title: 'å­˜å‚¨ç®¡ç†',
      subtitle: `å·²ä½¿ç”¨ ${this.storageUsed}`,
      icon: 'ğŸ“±',
      onPress: () => {
        console.log('Storage management clicked')
      }
    },
    {
      title: 'ç›¸æœºè®¾ç½®',
      subtitle: 'ç…§ç‰‡è´¨é‡ã€æ°´å°é…ç½®',
      icon: 'ğŸ“¸',
      onPress: () => {
        console.log('Camera settings clicked')
      }
    },
    {
      title: 'å…³äºåº”ç”¨',
      subtitle: `ç‰ˆæœ¬ ${this.version}`,
      icon: 'â„¹ï¸',
      onPress: () => {
        console.log('About clicked')
      }
    }
  ]

  build() {
    Column() {
      // å¤´éƒ¨
      Row() {
        Button('â† è¿”å›')
          .fontSize(16)
          .fontColor('#1890FF')
          .backgroundColor(Color.Transparent)
          .onClick(() => {
            router.replaceUrl({
              url: 'pages/MainPage',
              params: {}
            })
          })

        Text('è®¾ç½®')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor('#262626')
          .layoutWeight(1)
          .textAlign(TextAlign.Center)

        Blank()
      }
      .width('100%')
      .padding({ left: 16, right: 16, top: 12, bottom: 12 })
      .backgroundColor('#FFFFFF')

      // è®¾ç½®é¡¹åˆ—è¡¨
      Scroll() {
        Column({ space: 1 }) {
          // ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ
          Column() {
            Row() {
              Column() {
                Text('ğŸ‘¤ å·¥ï¿½ï¿½ï¿½å¸ˆ')
                  .fontSize(18)
                  .fontWeight(FontWeight.Medium)
                  .fontColor('#262626')
                Text('ç®¡ç†å‘˜')
                  .fontSize(14)
                  .fontColor('#8C8C8C')
                  .margin({ top: 4 })
              }
              .alignItems(HorizontalAlign.Start)
              .layoutWeight(1)

              Text('>')
                .fontSize(16)
                .fontColor('#C0C0C0')
            }
            .width('100%')
            .padding(16)
            .alignItems(VerticalAlign.Center)
          }
          .backgroundColor('#FFFFFF')
          .onClick(() => {
            console.log('User profile clicked')
          })

          // ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ
          Column() {
            Text('ğŸ“Š ä½¿ç”¨ç»Ÿè®¡')
              .fontSize(16)
              .fontWeight(FontWeight.Medium)
              .fontColor('#262626')
              .alignSelf(ItemAlign.Start)
              .margin({ bottom: 12 })

            Row() {
              Column() {
                Text(this.photoCount.toString())
                  .fontSize(24)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#1890FF')
                Text('ç…§ç‰‡')
                  .fontSize(12)
                  .fontColor('#8C8C8C')
                  .margin({ top: 4 })
              }
              .alignItems(HorizontalAlign.Center)
              .layoutWeight(1)

              Column() {
                Text('12')
                  .fontSize(24)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#52C41A')
                Text('å·¥ç¨‹')
                  .fontSize(12)
                  .fontColor('#8C8C8C')
                  .margin({ top: 4 })
              }
              .alignItems(HorizontalAlign.Center)
              .layoutWeight(1)

              Column() {
                Text('28')
                  .fontSize(24)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#FAAD14')
                Text('å·¥ç‚¹')
                  .fontSize(12)
                  .fontColor('#8C8C8C')
                  .margin({ top: 4 })
              }
              .alignItems(HorizontalAlign.Center)
              .layoutWeight(1)
            }
            .width('100%')
            .justifyContent(FlexAlign.SpaceAround)
          }
          .width('100%')
          .padding(20)
          .backgroundColor('#FFFFFF')

          // è®¾ç½®é€‰é¡¹
          ForEach(this.settingsList, (item: SettingItem) => {
            Column() {
              Row() {
                Text(item.icon)
                  .fontSize(20)
                  .margin({ right: 12 })

                Column() {
                  Text(item.title)
                    .fontSize(16)
                    .fontColor('#262626')
                  if (item.subtitle) {
                    Text(item.subtitle)
                      .fontSize(14)
                      .fontColor('#8C8C8C')
                      .margin({ top: 2 })
                  }
                }
                .alignItems(HorizontalAlign.Start)
                .layoutWeight(1)

                Text('>')
                  .fontSize(16)
                  .fontColor('#C0C0C0')
              }
              .width('100%')
              .padding(16)
              .alignItems(VerticalAlign.Center)
            }
            .backgroundColor('#FFFFFF')
            .onClick(() => {
              item.onPress()
            })
          })

          // ç‰ˆæœ¬ä¿¡æ¯
          Column() {
            Text(`Engineering Camera v${this.version}`)
              .fontSize(14)
              .fontColor('#8C8C8C')
              .textAlign(TextAlign.Center)
            Text('Â© 2024 å·¥ç¨‹ç›¸æœºå›¢é˜Ÿ')
              .fontSize(12)
              .fontColor('#C0C0C0')
              .textAlign(TextAlign.Center)
              .margin({ top: 4 })
          }
          .width('100%')
          .padding(20)
          .backgroundColor('#FFFFFF')
          .margin({ top: 20 })
        }
      }
      .layoutWeight(1)
      .backgroundColor('#F5F5F5')

      // åº•éƒ¨å¯¼èˆªæ 
      BottomNavigation({})
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F5F5')
  }
}